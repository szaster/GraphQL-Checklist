(this["webpackJsonpGraphQL-Checklist"]=this["webpackJsonpGraphQL-Checklist"]||[]).push([[0],{81:function(e,t,n){"use strict";n.r(t);var r=n(11),o=n(4),a=n.n(o),c=n(63),i=n.n(c),s=n(27),u=n.n(s),d=n(41),l=n(33),p=n(32),b=n(82),f=n(25),j=n.n(f);function h(){var e=Object(p.a)(["\n  mutation DeleteTodos($id: uuid!) {\n    delete_todos(where: { id: { _eq: $id } }) {\n      returning {\n        done\n        id\n        text\n      }\n    }\n  }\n"]);return h=function(){return e},e}function x(){var e=Object(p.a)(["\n  mutation addTodo($text: String!) {\n    insert_todos(objects: { text: $text }) {\n      returning {\n        done\n        id\n        text\n      }\n    }\n  }\n"]);return x=function(){return e},e}function m(){var e=Object(p.a)(["\n  mutation toggleTodo($id: uuid!, $done: Boolean!) {\n    update_todos(where: { id: { _eq: $id } }, _set: { done: $done }) {\n      returning {\n        done\n        id\n        text\n      }\n    }\n  }\n"]);return m=function(){return e},e}function O(){var e=Object(p.a)(["\n  query getTodos {\n    todos {\n      done\n      id\n      text\n    }\n  }\n"]);return O=function(){return e},e}var v=j()(O()),g=j()(m()),y=j()(x()),w=j()(h());var k=function(){var e=a.a.useState(""),t=Object(l.a)(e,2),n=t[0],o=t[1],c=Object(b.useQuery)(v),i=c.data,s=c.loading,p=c.error,f=Object(b.useMutation)(g),j=Object(l.a)(f,1)[0],h=Object(b.useMutation)(y,{onCompleted:function(){return o("")}}),x=Object(l.a)(h,1)[0],m=Object(b.useMutation)(w),O=Object(l.a)(m,1)[0];function k(){return(k=Object(d.a)(u.a.mark((function e(t){var n,r,o;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.id,r=t.done,e.next=3,j({variables:{id:n,done:!r}});case 3:o=e.sent,console.log("toggled todo:",o);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function C(){return(C=Object(d.a)(u.a.mark((function e(t){var r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),n.trim()){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,x({variables:{text:n},refetchQueries:[{query:v}]});case 5:r=e.sent,console.log("new todo",r);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function N(){return(N=Object(d.a)(u.a.mark((function e(t){var n,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.id,!window.confirm("Do you want to delete this todo?")){e.next=7;break}return e.next=5,O({variables:{id:n},update:function(e){var t=e.readQuery({query:v}).todos.filter((function(e){return e.id!==n}));e.writeQuery({query:v,data:{todos:t}})}});case 5:r=e.sent,console.log("deleted todos",r);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return s?Object(r.jsx)("div",{children:"Loading todos..."}):p?Object(r.jsx)("div",{children:"Error fetching todos!"}):Object(r.jsxs)("div",{className:"vh-100 code flex flex-column items-center bg-purple white pa3 fl-1 ",children:[Object(r.jsxs)("h1",{className:"f2-l",children:["GraphQL Checklist"," ",Object(r.jsx)("span",{role:"img","aria-label":"Checkmark",children:"\u2705"})]}),Object(r.jsxs)("form",{onSubmit:function(e){return C.apply(this,arguments)},className:"mb3",children:[Object(r.jsx)("input",{className:"pa2 f4 b--dashed",type:"text",placeholder:"Write your todo",onChange:function(e){return o(e.target.value)},value:n}),Object(r.jsx)("button",{className:"pa2 f4 bg-yellow",type:"submit",children:"Create"})]}),Object(r.jsx)("div",{className:"flex items-center justify-center flex-column",children:i.todos.map((function(e){return Object(r.jsxs)("p",{onDoubleClick:function(){return function(e){return k.apply(this,arguments)}(e)},children:[Object(r.jsx)("span",{className:"pointer list pa1 f3 ".concat(e.done&&"strike"),children:e.text}),Object(r.jsx)("button",{onClick:function(){return function(e){return N.apply(this,arguments)}(e)},className:"bg-transparent bn f4",children:Object(r.jsx)("span",{className:"red",children:"\xd7"})})]},e.id)}))})]})},C=new(n(45).a)({uri:"https://close-cat-85.hasura.app/v1/graphql"});i.a.render(Object(r.jsx)(b.ApolloProvider,{client:C,children:Object(r.jsx)(k,{})}),document.getElementById("root"))}},[[81,1,2]]]);